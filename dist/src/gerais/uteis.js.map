{"version":3,"file":"uteis.js","sourceRoot":"","sources":["../../../src/gerais/uteis.ts"],"names":[],"mappings":"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","sourcesContent":["// --------------------------------------------\n// --------------------------------------------\n// Validador de CNPJ Alfanumérico (versão simplificada)\n// Compatível com o novo formato de CNPJ a partir de 2026\n// --------------------------------------------\n\n    /**\n    * Converte um caractere (letra ou número) em valor numérico\n    * conforme a regra do novo CNPJ alfanumérico:\n    * - '0' → 0\n    * - '9' → 9\n    * - 'A' → 17 (pois 65 - 48 = 17)\n    * - 'B' → 18, e assim por diante\n    */\nfunction valorPorCaractere(ch) {\n    const code = ch.charCodeAt(0); // obtém o código ASCII do caractere\n\n    // Se for um dígito ('0' a '9')\n    if (code >= 48 && code <= 57) {\n        return code - 48;\n    }\n\n    // Se for uma letra maiúscula ('A' a 'Z')\n    if (code >= 65 && code <= 90) {\n        return code - 48;\n    }\n\n    // Se não for válido, lança erro\n    throw new Error(`Caractere inválido no CNPJ: ${ch}`);\n}\n\n/**\n * Calcula os dois dígitos verificadores (DV) do CNPJ.\n * O algoritmo usa o método de módulo 11, igual ao formato antigo,\n * mas agora com valores numéricos derivados de letras.\n */\nfunction calcularDVs(cnpj12) {\n    const valores = cnpj12.split(\"\").map(valorPorCaractere);\n\n    // Pesos usados para o cálculo do primeiro DV\n    const pesos1 = [5, 4, 3, 2, 9, 8, 7, 6, 5, 4, 3, 2];\n    let soma1 = 0;\n\n    // Multiplica cada valor pelo peso correspondente\n    for (let i = 0; i < 12; i++) {\n        soma1 += valores[i] * pesos1[i];\n    }\n\n    // Calcula o primeiro DV\n    const resto1 = soma1 % 11;\n    const dv1 = resto1 < 2 ? 0 : 11 - resto1;\n\n    // Adiciona o primeiro DV e calcula o segundo\n    const valores13 = [...valores, dv1];\n    const pesos2 = [6, 5, 4, 3, 2, 9, 8, 7, 6, 5, 4, 3, 2];\n    let soma2 = 0;\n\n    for (let i = 0; i < 13; i++) {\n        soma2 += valores13[i] * pesos2[i];\n    }\n\n    const resto2 = soma2 % 11;\n    const dv2 = resto2 < 2 ? 0 : 11 - resto2;\n\n    // Retorna ambos os dígitos verificadores\n    return [dv1, dv2];\n}\n\n/**\n * Valida um CNPJ (numérico ou alfanumérico) conforme o novo padrão.\n * Remove caracteres especiais, converte letras e confere os dígitos verificadores.\n */\nfunction validarCNPJ(cnpj) {\n    // Remove pontos, barras e traços\n    const limpo = cnpj.replace(/[^A-Z0-9]/gi, \"\").toUpperCase();\n\n    // O CNPJ precisa ter exatamente 14 caracteres (letras + números)\n    if (limpo.length !== 14) return false;\n\n    const parte12 = limpo.slice(0, 12);\n    const dvInformado1 = Number(limpo.charAt(12));\n    const dvInformado2 = Number(limpo.charAt(13));\n\n    // Recalcula os DVs com base nos 12 primeiros caracteres\n    const [dv1, dv2] = calcularDVs(parte12);\n\n    // Compara os DVs calculados com os informados\n    return dv1 === dvInformado1 && dv2 === dvInformado2;\n}\n\n// --------------------------------------------\n// Exemplo de uso\n// --------------------------------------------\nconsole.log(validarCNPJ(\"A1B2C3D4E5F6-78\".replace(/-/g, \"\")));\n// Retorna true ou false dependendo se o CNPJ é válido"]}