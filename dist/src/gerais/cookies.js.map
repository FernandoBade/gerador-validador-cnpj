{"version":3,"file":"cookies.js","sourceRoot":"","sources":["../../../src/gerais/cookies.ts"],"names":[],"mappings":"AAAA;;;;;+BAK+B;AAE/B;;;GAGG;AACH,MAAM,UAAU,yBAAyB;IACrC,MAAM,QAAQ,GAAG,eAAe,CAAC;IACjC,MAAM,gBAAgB,GAAG,uBAAuB,CAAC;IACjD,MAAM,gBAAgB,GAAG,uBAAuB,CAAC;IACjD,MAAM,aAAa,GAAG,iBAAiB,CAAC;IAExC,MAAM,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;IAChD,MAAM,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;IAC/D,MAAM,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;IAE/D,IAAI,CAAC,KAAK,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY;QAAE,OAAO;IAErD,MAAM,WAAW,GAAG,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;IAExD,+CAA+C;IAC/C,IAAI,WAAW,KAAK,MAAM,IAAI,WAAW,KAAK,OAAO,EAAE,CAAC;QACnD,MAAc,CAAC,SAAS,GAAI,MAAc,CAAC,SAAS,IAAI,EAAE,CAAC;QAC3D,MAAc,CAAC,SAAS,CAAC,IAAI,CAAC;YAC3B,KAAK,EAAE,sBAAsB;YAC7B,aAAa,EAAE,WAAW,KAAK,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,UAAU;SAChE,CAAC,CAAC;IACP,CAAC;IAED,wDAAwD;IACxD,IAAI,WAAW,KAAK,MAAM,IAAI,WAAW,KAAK,OAAO,EAAE,CAAC;QACpD,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;IACnC,CAAC;IAED;;OAEG;IACH,MAAM,aAAa,GAAG,GAAG,EAAE;QACvB,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QAClC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IAClC,CAAC,CAAC;IAEF,YAAY,CAAC,gBAAgB,CAAC,OAAO,EAAE,GAAG,EAAE;QACxC,YAAY,CAAC,OAAO,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;QAC5C,aAAa,EAAE,CAAC;QAEf,MAAc,CAAC,SAAS,GAAI,MAAc,CAAC,SAAS,IAAI,EAAE,CAAC;QAC3D,MAAc,CAAC,SAAS,CAAC,IAAI,CAAC;YAC3B,KAAK,EAAE,sBAAsB;YAC7B,aAAa,EAAE,QAAQ;SAC1B,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;IAEH,YAAY,CAAC,gBAAgB,CAAC,OAAO,EAAE,GAAG,EAAE;QACxC,YAAY,CAAC,OAAO,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;QAC7C,aAAa,EAAE,CAAC;QAEf,MAAc,CAAC,SAAS,GAAI,MAAc,CAAC,SAAS,IAAI,EAAE,CAAC;QAC3D,MAAc,CAAC,SAAS,CAAC,IAAI,CAAC;YAC3B,KAAK,EAAE,sBAAsB;YAC7B,aAAa,EAAE,UAAU;SAC5B,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;AACP,CAAC;AAED;;GAEG;AACH,MAAM,CAAC,MAAM,WAAW,GAAG;;;;;;;;;;;;;;;;;CAiB1B,CAAC;AAEF;;;GAGG;AACH,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,GAAG,EAAE;IAC/C,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAC,EAAE,CAAC;QAC5C,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;IAC/D,CAAC;IACD,IAAI,CAAC;QACD,yBAAyB,EAAE,CAAC;IAChC,CAAC;IAAC,MAAM,CAAC;IACT,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["/* ============================\r\n   Aviso de Cookies (Consentimento)\r\n   - Exibe banner de consentimento e salva a decisão no localStorage\r\n   - Reenvia o status de consentimento via dataLayer (GTM)\r\n   - Evita reexibir o banner quando já houver decisão\r\n============================ */\r\n\r\n/**\r\n * @summary Inicializa o aviso de cookies e gerencia a escolha do usuário (aceitar ou recusar).\r\n * Exibe um banner simples de consentimento e grava a decisão no localStorage.\r\n */\r\nexport function inicializarAvisoDeCookies(): void {\r\n    const AVISO_ID = \"aviso-cookies\";\r\n    const BOTAO_ACEITAR_ID = \"botao-aceitar-cookies\";\r\n    const BOTAO_RECUSAR_ID = \"botao-recusar-cookies\";\r\n    const CHAVE_COOKIES = \"aceitou-cookies\";\r\n\r\n    const aviso = document.getElementById(AVISO_ID);\r\n    const botaoAceitar = document.getElementById(BOTAO_ACEITAR_ID);\r\n    const botaoRecusar = document.getElementById(BOTAO_RECUSAR_ID);\r\n\r\n    if (!aviso || !botaoAceitar || !botaoRecusar) return;\r\n\r\n    const preferencia = localStorage.getItem(CHAVE_COOKIES);\r\n\r\n    // Reenvia o status salvo anterior (se existir)\r\n    if (preferencia === \"true\" || preferencia === \"false\") {\r\n        (window as any).dataLayer = (window as any).dataLayer || [];\r\n        (window as any).dataLayer.push({\r\n            event: \"status_consentimento\",\r\n            consentimento: preferencia === \"true\" ? \"aceito\" : \"recusado\"\r\n        });\r\n    }\r\n\r\n    // Mostra o aviso apenas se o usuário ainda não escolheu\r\n    if (preferencia !== \"true\" && preferencia !== \"false\") {\r\n        aviso.classList.add(\"visivel\");\r\n    }\r\n\r\n    /**\r\n     * @summary Oculta o banner após uma decisão do usuário.\r\n     */\r\n    const esconderAviso = () => {\r\n        aviso.classList.remove(\"visivel\");\r\n        aviso.classList.add(\"oculto\");\r\n    };\r\n\r\n    botaoAceitar.addEventListener(\"click\", () => {\r\n        localStorage.setItem(CHAVE_COOKIES, \"true\");\r\n        esconderAviso();\r\n\r\n        (window as any).dataLayer = (window as any).dataLayer || [];\r\n        (window as any).dataLayer.push({\r\n            event: \"status_consentimento\",\r\n            consentimento: \"aceito\"\r\n        });\r\n    });\r\n\r\n    botaoRecusar.addEventListener(\"click\", () => {\r\n        localStorage.setItem(CHAVE_COOKIES, \"false\");\r\n        esconderAviso();\r\n\r\n        (window as any).dataLayer = (window as any).dataLayer || [];\r\n        (window as any).dataLayer.push({\r\n            event: \"status_consentimento\",\r\n            consentimento: \"recusado\"\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * @summary HTML do banner de cookies injetado automaticamente no DOM.\r\n */\r\nexport const htmlCookies = `\r\n<div id=\"aviso-cookies\"\r\n  class=\"fixed bottom-0 left-0 right-0 shadow-inner bg-transparent backdrop-blur-md text-white text-sm flex flex-col sm:flex-row justify-between items-center gap-3 px-6 py-4 shadow-[0_-10px_15px_-10px_rgba(124,58,237,0.5)] transition-all duration-500 translate-y-full opacity-0 z-50\">\r\n  <p class=\"text-center sm:text-left\">\r\n    A gente usa cookies pra entender como você navega e deixar tudo mais redondinho. Pode ser?\r\n  </p>\r\n  <div class=\"flex gap-5\">\r\n    <button id=\"botao-recusar-cookies\"\r\n      class=\"text-slate-100/50 px-2 font-semibold hover:text-slate-300 hover:border-slate-300 transition-all duration-300\">\r\n      Prefiro não\r\n    </button>\r\n    <button id=\"botao-aceitar-cookies\"\r\n      class=\"bg-pink-500 hover:bg-pink-600 dark:bg-pink-500 dark:hover:bg-pink-600 text-white font-semibold px-4 py-2 rounded-lg transition\">\r\n      Pode sim!\r\n    </button>\r\n  </div>\r\n</div>\r\n`;\r\n\r\n/**\r\n * @summary Injeta o HTML do banner (se ainda não existir) e inicializa os eventos\r\n * assim que o DOM estiver pronto.\r\n */\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n    if (!document.getElementById(\"aviso-cookies\")) {\r\n        document.body.insertAdjacentHTML(\"beforeend\", htmlCookies);\r\n    }\r\n    try {\r\n        inicializarAvisoDeCookies();\r\n    } catch {\r\n    }\r\n});\r\n"]}