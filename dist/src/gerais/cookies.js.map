{"version":3,"file":"cookies.js","sourceRoot":"","sources":["../../../src/gerais/cookies.ts"],"names":[],"mappings":"AAAA;;;;;+BAK+B;AAE/B;;;GAGG;AACH,MAAM,UAAU,yBAAyB;IACvC,MAAM,QAAQ,GAAG,eAAe,CAAC;IACjC,MAAM,gBAAgB,GAAG,uBAAuB,CAAC;IACjD,MAAM,gBAAgB,GAAG,uBAAuB,CAAC;IACjD,MAAM,aAAa,GAAG,iBAAiB,CAAC;IAExC,MAAM,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;IAChD,MAAM,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;IAC/D,MAAM,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;IAE/D,IAAI,CAAC,KAAK,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY;QAAE,OAAO;IAErD,MAAM,WAAW,GAAG,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;IAExD,+CAA+C;IAC/C,IAAI,WAAW,KAAK,MAAM,IAAI,WAAW,KAAK,OAAO,EAAE,CAAC;QACrD,MAAc,CAAC,SAAS,GAAI,MAAc,CAAC,SAAS,IAAI,EAAE,CAAC;QAC3D,MAAc,CAAC,SAAS,CAAC,IAAI,CAAC;YAC7B,KAAK,EAAE,sBAAsB;YAC7B,aAAa,EAAE,WAAW,KAAK,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,UAAU;SAC9D,CAAC,CAAC;IACL,CAAC;IAED,wDAAwD;IACxD,IAAI,WAAW,KAAK,MAAM,IAAI,WAAW,KAAK,OAAO,EAAE,CAAC;QACtD,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;IACjC,CAAC;IAED;;OAEG;IACH,MAAM,aAAa,GAAG,GAAG,EAAE;QACzB,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QAClC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IAChC,CAAC,CAAC;IAEF,YAAY,CAAC,gBAAgB,CAAC,OAAO,EAAE,GAAG,EAAE;QAC1C,YAAY,CAAC,OAAO,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;QAC5C,aAAa,EAAE,CAAC;QAEf,MAAc,CAAC,SAAS,GAAI,MAAc,CAAC,SAAS,IAAI,EAAE,CAAC;QAC3D,MAAc,CAAC,SAAS,CAAC,IAAI,CAAC;YAC7B,KAAK,EAAE,sBAAsB;YAC7B,aAAa,EAAE,QAAQ;SACxB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,YAAY,CAAC,gBAAgB,CAAC,OAAO,EAAE,GAAG,EAAE;QAC1C,YAAY,CAAC,OAAO,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;QAC7C,aAAa,EAAE,CAAC;QAEf,MAAc,CAAC,SAAS,GAAI,MAAc,CAAC,SAAS,IAAI,EAAE,CAAC;QAC3D,MAAc,CAAC,SAAS,CAAC,IAAI,CAAC;YAC7B,KAAK,EAAE,sBAAsB;YAC7B,aAAa,EAAE,UAAU;SAC1B,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC;AAED;;GAEG;AACH,MAAM,CAAC,MAAM,WAAW,GAAG;;;;;;;;;;;;;;;;;CAiB1B,CAAC;AAEF;;;GAGG;AACH,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,GAAG,EAAE;IACjD,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAC,EAAE,CAAC;QAC9C,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;IAC7D,CAAC;IACD,IAAI,CAAC;QACH,yBAAyB,EAAE,CAAC;IAC9B,CAAC;IAAC,MAAM,CAAC,CAAA,CAAC;AACZ,CAAC,CAAC,CAAC","sourcesContent":["/* ============================\n   Aviso de Cookies (Consentimento)\n   - Exibe banner de consentimento e salva a decisão no localStorage\n   - Reenvia o status de consentimento via dataLayer (GTM)\n   - Evita reexibir o banner quando já houver decisão\n============================ */\n\n/**\n * @summary Inicializa o aviso de cookies e gerencia a escolha do usuário (aceitar ou recusar).\n * Exibe um banner simples de consentimento e grava a decisão no localStorage.\n */\nexport function inicializarAvisoDeCookies(): void {\n  const AVISO_ID = \"aviso-cookies\";\n  const BOTAO_ACEITAR_ID = \"botao-aceitar-cookies\";\n  const BOTAO_RECUSAR_ID = \"botao-recusar-cookies\";\n  const CHAVE_COOKIES = \"aceitou-cookies\";\n\n  const aviso = document.getElementById(AVISO_ID);\n  const botaoAceitar = document.getElementById(BOTAO_ACEITAR_ID);\n  const botaoRecusar = document.getElementById(BOTAO_RECUSAR_ID);\n\n  if (!aviso || !botaoAceitar || !botaoRecusar) return;\n\n  const preferencia = localStorage.getItem(CHAVE_COOKIES);\n\n  // Reenvia o status salvo anterior (se existir)\n  if (preferencia === \"true\" || preferencia === \"false\") {\n    (window as any).dataLayer = (window as any).dataLayer || [];\n    (window as any).dataLayer.push({\n      event: \"status_consentimento\",\n      consentimento: preferencia === \"true\" ? \"aceito\" : \"recusado\",\n    });\n  }\n\n  // Mostra o aviso apenas se o usuário ainda não escolheu\n  if (preferencia !== \"true\" && preferencia !== \"false\") {\n    aviso.classList.add(\"visivel\");\n  }\n\n  /**\n   * @summary Oculta o banner após uma decisão do usuário.\n   */\n  const esconderAviso = () => {\n    aviso.classList.remove(\"visivel\");\n    aviso.classList.add(\"oculto\");\n  };\n\n  botaoAceitar.addEventListener(\"click\", () => {\n    localStorage.setItem(CHAVE_COOKIES, \"true\");\n    esconderAviso();\n\n    (window as any).dataLayer = (window as any).dataLayer || [];\n    (window as any).dataLayer.push({\n      event: \"status_consentimento\",\n      consentimento: \"aceito\",\n    });\n  });\n\n  botaoRecusar.addEventListener(\"click\", () => {\n    localStorage.setItem(CHAVE_COOKIES, \"false\");\n    esconderAviso();\n\n    (window as any).dataLayer = (window as any).dataLayer || [];\n    (window as any).dataLayer.push({\n      event: \"status_consentimento\",\n      consentimento: \"recusado\",\n    });\n  });\n}\n\n/**\n * @summary HTML do banner de cookies injetado automaticamente no DOM.\n */\nexport const htmlCookies = `\n<div id=\"aviso-cookies\"\n  class=\"fixed bottom-0 left-0 right-0 shadow-inner bg-transparent backdrop-blur-md text-white text-sm flex flex-col sm:flex-row justify-between items-center gap-3 px-6 py-4 shadow-[0_-10px_15px_-10px_rgba(124,58,237,0.5)] transition-all duration-500 translate-y-full opacity-0 z-50\">\n  <p class=\"text-center sm:text-left\">\n    A gente usa cookies pra entender como você navega e deixar tudo mais redondinho. Pode ser?\n  </p>\n  <div class=\"flex gap-5\">\n    <button id=\"botao-recusar-cookies\"\n      class=\"text-slate-100/50 px-2 font-semibold hover:text-slate-300 hover:border-slate-300 transition-all duration-300\">\n      Prefiro não\n    </button>\n    <button id=\"botao-aceitar-cookies\"\n      class=\"bg-pink-500 hover:bg-pink-600 dark:bg-pink-500 dark:hover:bg-pink-600 text-white font-semibold px-4 py-2 rounded-lg transition\">\n      Pode sim!\n    </button>\n  </div>\n</div>\n`;\n\n/**\n * @summary Injeta o HTML do banner (se ainda não existir) e inicializa os eventos\n * assim que o DOM estiver pronto.\n */\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  if (!document.getElementById(\"aviso-cookies\")) {\n    document.body.insertAdjacentHTML(\"beforeend\", htmlCookies);\n  }\n  try {\n    inicializarAvisoDeCookies();\n  } catch {}\n});\n"]}